<!DOCTYPE html><html lang="en"><head>    <meta charset="UTF-8">    <title>智能面板</title>    <link rel="stylesheet" href="css/wmpanelStyle.css" type="text/css"/>    <script src="js/jquery-2.0.3.min.js" type="text/javascript"></script>    <!-- 最新版本的 Bootstrap 核心 CSS 文件 -->    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css"          integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">    <script type="text/javascript" src="js/dbpage.js"></script>    <script type="text/javascript" src="js/wmpanel.js"></script>    <!--  echarts 和 访问vantiq js -->    <script type="text/javascript" src="js/echarts.js"></script>    <script src="js/common.js"></script></head><body><div id="sm">    <div id="s1001" style="width: 200px;height:100px;background-color: #abacff" onclick="addAccessNum(this);show();">        资源ID 1001 公益活动    </div>    <div id="s1002" style="width: 200px;height:100px;background-color: aquamarine" onclick="addAccessNum(this);show()">        资源ID 1002 完美专题会议    </div>    <div id="s1003" style="width: 200px;height:100px;background-color: cadetblue" onclick="addAccessNum(this);show()">        资源ID 1003 下半年报销金额柱形图    </div>    <div id="s1004" style="width: 200px;height:100px;background-color: #5254a0" onclick="addAccessNum(this);show()">        资源ID 1004 市内交通费报销说明    </div>    <div id="s1005" style="width: 200px;height:100px;background-color: #8044a0" onclick="addAccessNum(this);show()">        资源ID 1005 公司差旅费报销单    </div>    <div id="s1006" style="width: 200px;height:100px;background-color: #31a066" onclick="addAccessNum(this);show()">        资源ID 1006 报销占比饼图    </div>    <div id="s1007" style="width: 200px;height:100px;background-color: cadetblue" onclick="addAccessNum(this);show()">        资源ID 1007 手机通讯费报销单    </div>    <div id="q1008" style="width: 200px;height:100px;background-color: #a05657" onclick="showThreeDataToPanel(this)">        资源ID  1008  测试推送三条到面板    </div></div><div style="height:2000px;"></div><!--右侧面板--><div class="wmpanelSide">    <ul class="pnul">        <li class="pnli"><a href="javascript:void(0);">            <div class="wmside" id="changeS">换肤</div>        </a></li>        <li class="pnli"><a href="javascript:void(0);">            <div class="wmside" id="set">配置</div>        </a></li>        <li class="pnli"><a href="javascript:void(0);">            <div class="wmside" id="mesg">推送</div>        </a></li>        <li class="pnli"><a href="javascript:void(0);">            <div class="wmside" id="toDo">待办</div>        </a></li>        <li class="pnli2"><a href="javascript:goTop();">            <div class="wmside2"></div>        </a></li>    </ul>    <!--我的待办-->    <div class="daiban">        <div class="daibanMenu">            <!--头-->            <div class="daibantop">我的待办</div>            <!--列表-->            <div class="daibanlist">            </div>            <!--尾-->            <div class="daibanfoot">                <!--分页-->                <!--      <ul class="dbpage" id="dbpage"></ul>-->                <button class="db-more-btn"                        onclick="closedb();javascript:window.open('https://www.baidu.com/');">查看更多                </button>            </div>        </div>    </div>    <!--vantiq消息推送-->    <div class="vantiqMesg">        <ul class="vantiqMesgContent">            <!--上-->            <li class="vantiqMesgDetail" id="vantiqMesgDetail1">                <a href="javascript:location.href=('http://www.perfect99.com/news/News18664.html');"                   style="overflow: hidden;height:150px;">                    <p style="font-weight:bold;color: #2A2F37">完美公司召开2019年年度工作会议</p>                    <p style='text-indent:2em'>“我们都在努力奔跑，我们都是追梦人。”                        在2019年新年贺词中，习近平主席满怀信心，寄语亿万人民勇敢踏上追寻梦想的新征程。心怀梦想、奋力追梦，                        才能继往开来、锐意进取。2019年，在新时代、新科技带来的新机遇面前，完美公司与时俱进，通过......                    </p></a>            </li>            <!--中-->            <li class="vantiqMesgDetail" id="vantiqMesgDetail2">                <a href="javascript:location.href=('http://www.zhicheng.com/n/20190122/243825_2.html');"                   style="overflow: hidden;height:150px;">                    <p style="font-weight:bold;color: #2A2F37">2019年终奖最新消息</p>                    <p style='text-indent:2em'>2019年年终奖个人所得税税率有哪些变化？                        由于新按月换算后的综合所得税率与之前税率表的含税级距发生了较大变化，主要是25000元以内部分。                        因此，年终奖30万元(25000*12)以内减税幅度较大。按照规定，在2021年12月31日前，不并入当年综合......                    </p>                </a></li>            <!--下-->            <li class="vantiqMesgDetail22" id="vantiqMesgDetail3">                <a href="javascript:window.open('https://www.baidu.com/');"><p style="font-weight:bold;color: #2A2F37">                    完美2019年年会</p><img                        src="http://www.perfect99.com/Upload/albumphotos/2019/1/big/636832433675033217.jpg"                        style="width: 300px;height: 150px;padding-left: 50px;"></a>            </li>        </ul>    </div>    <!--配置-->    <div class="wmsettingBox">        <label><input value="setOpen" name="set" type="radio" onclick="saveCookie()" checked="checked"><span class='showOrhide'>展示推送</span></label>        <label><input value="setClose" name="set" type="radio" onclick="saveCookie()" ><span class='showOrhide'>关闭推送</span></label>        <br><button class="settingBoxbtn">确认</button>    </div></div><script type="text/javascript">     //待办刷新数据示例    $(document).ready(function () {        updatelist();//开始刷新    });    //设置每X秒刷新一次    function updatelist() {        setInterval(newa, 3000);    }    //需要去刷新的方法    var a = 0;    function newa() {        a = a + 1;        console.log(a);        //假设拿数据的方法        //有新数据        if (a == 3 || a == 10) {            $("<img id='redpoint' src='img/redpoint.png' style='position: absolute;" +                    "width: 12px;height: 12px;margin-left: 30px;margin-top: 5px;'>").insertAfter("#toDo");        }        $("#toDo").click(function () {            $("#redpoint").remove();        });    }    //待办列表    var datas = [        {"id": 1, "title": "申请使用印章“完美（中国有限公司广州分公司）印章。”请您审批。", "name": "李敏", "time": "2019.01.01", "department": "设计中心"},        {"id": 2, "title": "申请年度话费报销，请您审批。", "name": "呵呵", "time": "2019.01.01", "department": "信息中台"},        {"id": 3, "title": "申请年度话费报销，请您审批。", "name": "猫", "time": "2019.01.01", "department": "财务部"},        {"id": 4, "title": "申请年度话费报销，请您审批。", "name": "狗", "time": "2019.01.01", "department": "设计中心"},        {"id": 5, "title": "申请年度话费报销，请您审批。", "name": "猪", "time": "2019.01.01", "department": "宣传部"},        {"id": 6, "title": "申请年度话费报销，请您审批。", "name": "猪", "time": "2019.01.01", "department": "宣传部"},        {"id": 7, "title": "申请年度话费报销，请您审批。", "name": "猪", "time": "2019.01.01", "department": "宣传部"},        {"id": 8, "title": "申请年度话费报销，请您审批。", "name": "猪", "time": "2019.01.01", "department": "宣传部"}    ];    var options = {        "id": "dbpage",//显示页码的元素        "data": datas,//显示数据        "maxshowdbpageitem": 3,//最多显示的页码个数        "dbpagelistcount": 5,//每页显示数据个数        "callBack": function (result) {            var cHtml = "";            for (var i = 0; i < result.length; i++) {                cHtml += "<li class='daibanli'>" +                        "<div class='daibancontent'>" +                        result[i].name + "——" + result[i].title +                        "</div>" +                        "<div class='daibanname'>" + result[i].name + "</div>" +                        "<div class='daibandepartment'>（" + result[i].department + "）</div>" +                        "<div class='daibantime'>" + result[i].time + "</div>" +                        "</li>";//处理数据            }            $(".daibanlist").html(cHtml);//将数据增加到页面中        }    };    dbpage.init(datas.length, 1, options);    //vantiq推送消息    var userId = "20155";//默认用户为 20155    var urlUserId = getQueryString("userId"); //根据问号带参获取 用户的id    if (urlUserId != null) {        userId = urlUserId;    }    //alert(userId);    $(document).ready(function () {        getUserAttantion(userId);//开始刷新    });    //根据userId拿到点击最多的3条    function getUserAttantion(userId) {        ajaxPost("/selectUserAttention", {"userId": userId}, function (rs) {            var data1 = rs.data[0];            var data2 = rs.data[1];            var data3 = rs.data[2];            //alert(JSON.stringify(rs));            flushTuiSong(data1.resourceId, "#vantiqMesgDetail1");            flushTuiSong(data2.resourceId, "#vantiqMesgDetail2");            flushTuiSong(data3.resourceId, "#vantiqMesgDetail3");        })    }    //根据输入框的输入的 resourceId 更新资源访记录    function clickResourceId() {        var resourceId = document.getElementById("resourceId").value;        ajaxPost("/updateUserAttention", {"userId": userId, "resourceId": resourceId}, function (rs) {            //alert(JSON.stringify(rs));        })    }    //更新访问次数    function addAccessNum(obj) {        //var userId = "20155";        var resourceId = obj.id;        resourceId = resourceId.substr(1);        var resourceType = getResourceType(resourceId) ; //获取资源类型        //alert(resourceType);        ajaxPost("/updateUserAttention", {"userId": userId, "resourceId": resourceId,"resourceType":resourceType}, function (rs) {            //alert(JSON.stringify(rs));            // getUserAttantion(userId);            showThreeDataToPanel(obj);        })    }    //刷新推送数据    function flushTuiSong(resourceId, liId) {        $(liId).empty();        var htmlData = getUiBySourceId(resourceId, liId);//画展示数据        $(liId).append(htmlData);    }     //推送三个内容到面板     function showThreeDataToPanel(obj) {         //var userId = "20155";         var resourceId = obj.id;         resourceId = resourceId.substr(1);         var resourceType = getResourceType(+resourceId);         //alert(resourceId);         ajaxPost("/selectUserAttentionByType", {"userId": userId,"resourceType":resourceType}, function (rs) {             // alert(JSON.stringify(rs));             var data1 = rs.data[0];             var data2 = rs.data[1];             var data3 = rs.data[2];             //alert(JSON.stringify(rs));             flushTuiSong(data1.resourceId, "#vantiqMesgDetail1");             flushTuiSong(data2.resourceId, "#vantiqMesgDetail2");             flushTuiSong(data3.resourceId, "#vantiqMesgDetail3");             //getUserAttantion(userId);         })     }</script></body></html>